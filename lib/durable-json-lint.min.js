(function(){var a,b,c;a=typeof module=="undefined"?window.esprima:require("esprima"),b=typeof module=="undefined"?window.falafel:require("free-falafel"),c=function(c){var d,e,f,g,h,i,j,k,l,m;if(!c||/^\s*$/.test(c))return{json:null,errors:[{lineNumber:1,column:1,description:"An empty string is not valid Json",status:"crash"}]};m="(function(){return "+c+";\n})();",i=[];try{d=a.parse(m,{range:!0,tolerant:!0,loc:!0,raw:!0})}catch(n){return n.status="crash",n.index>=m.length-7&&(n.lineNumber>=m.match(/\r\n?|\n/g).length+1&&n.lineNumber--,n.column=1,n.description="Invalid Json. Did you forget to a close bracket?"),i.push(n),{errors:i,json:null}}return j=/^(?:-?(?=[1-9]|0(?!\d))\d+(\.\d+)?([eE][+-]?\d+)?|true|false|null|"([^"\\]|(?:\\["\\\/bfnrt])|(?:\\u[\][0-9a-f]{4}))*")$/,f=/,(?=\s*[\]}]\s*$)/,g=function(a,b,c){i.push({lineNumber:a.loc.start.line,column:a.loc.start.column,description:c,status:b});if(a.loc.start.line===1)return i[i.length-1].column-=19},l=null,e=function(a){var b;l===null&&(a.valid=!0),l===null&&a.type==="ReturnStatement"&&(l=a.argument);if(a.valid!=null)return;if(!a.parent.valid){a.valid=!1;return}switch(a.type){case"Literal":if(j.test(a.raw))return a.valid=!0;a.valid=!1;switch(a.raw[0]){case"'":g(a,"correctable","Json strings must use double quotes");break;case'"':g(a,"correctable","Invalid Json string");break;default:g(a,"correctable","Invalid Json number")}return a.correct=JSON.stringify(a.value);case"UnaryExpression":if(a.operator==="-"&&a.argument.type==="Literal")return a.valid=!0;break;case"ObjectExpression":return a.valid=!0,a.props={};case"ArrayExpression":return a.valid=!0;case"Property":a.valid=!0,b=a.key;if(b.type==="Identifier")return g(b,"correctable",'Keys must be double quoted in Json. Did you mean "'+b.name+'"?'),b.valid=!1,b.correct=JSON.stringify(b.name);if(b.type==="Literal"&&typeof b.value=="number")return g(b,"correctable",'Keys must be double quoted in Json. Did you mean "'+b.raw+'"?'),b.valid=!1,b.correct=JSON.stringify(b.raw);break;case"Identifier":return a.valid=!1,g(a,"guessable",'An identifier is not a valid Json element. Did you mean "'+a.name+'"?'),a.correct=JSON.stringify(a.name);case"CallExpression":return a.valid=!1,g(a,"fail","You can not make function calls in Json. Do you think I am a fool?");default:return a.valid=!1,g(a,"fail",'A "'+a.type+'" is an invalid Json element.')}},h=function(a){var b;a.type==="Property"&&(b=a.key,a.parent.props[b.correct||b.raw]!=null?(a.valid=!1,a.correct="",g(a,"guessable","Duplicate key in Json object. The key "+(b.correct||b.raw)+" is already present.")):a.parent.props[b.correct||b.raw]=a),(a.type==="ObjectExpression"||a.type==="ArrayExpression")&&a.update(a.source().replace(f,""));if(a.valid)return;a.correct!=null?a.update(a.correct):a.update("null")},k=b(m,{ast:d},h,e).toString(),k=k.substring(19,k.length-7),{json:k,errors:i}},typeof module=="undefined"?window.durableJsonLint=c:module.exports=c}).call(this)